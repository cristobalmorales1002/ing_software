/* frontend/src/theme.css */

/* 1. MODO OSCURO (Por defecto) */
:root {
    --bg-main: #0b1219;
    --bg-card: #15202b;
    --bg-input: #0b1219;
    --text-main: #e0e6ed;
    --text-muted: #94a3b8;
    --border-color: #2c3e50;
    --accent-color: #4da8da;
    --sidebar-bg: linear-gradient(180deg, #0f1923 0%, #080c11 100%);
    --hover-bg: rgba(77, 168, 218, 0.1);
    --bg-form: #1e293b;

    /* Logo */
    --logo-bg: rgba(0, 0, 0, 0.2);
    --logo-border: rgba(255, 255, 255, 0.05);

    /* --- COLOR UNIFICADO DE ROL (Cyan #06b6d4) --- */
    --role-unified-bg: #06b6d4;
    --role-unified-text: #ffffff;    /* Letras blancas */

    /* Asignamos variables */
    --role-admin-bg: var(--role-unified-bg);
    --role-medico-bg: var(--role-unified-bg);
    --role-investigador-bg: var(--role-unified-bg);
    --role-estudiante-bg: var(--role-unified-bg);
    --role-visualizador-bg: var(--role-unified-bg);
    --role-text-color: var(--role-unified-text);
}

/* 2. MODO CLARO */
[data-theme="light"] {
    --bg-main: #f8f9fa;
    --bg-card: #ffffff;
    --bg-input: #ffffff;
    --text-main: #212529;
    --text-muted: #6c757d;
    --border-color: #dee2e6;
    --accent-color: #0d6efd;
    --sidebar-bg: linear-gradient(180deg, #ffffff 0%, #f1f3f5 100%);
    --hover-bg: rgba(13, 110, 253, 0.1);
    --bg-form: #ffffff;

    /* Logo */
    --logo-bg: #ffffff;
    --logo-border: #dee2e6;

    /* --- COLOR UNIFICADO (Igual al oscuro) --- */
    --role-unified-bg: #06b6d4;
    --role-unified-text: #ffffff;

    --role-admin-bg: var(--role-unified-bg);
    --role-medico-bg: var(--role-unified-bg);
    --role-investigador-bg: var(--role-unified-bg);
    --role-estudiante-bg: var(--role-unified-bg);
    --role-visualizador-bg: var(--role-unified-bg);
    --role-text-color: var(--role-unified-text);
}

/* Transiciones suaves */
body, .card, .sidebar, .form-control, table, .logo-container, .badge {
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

/* Switches */
[data-theme="dark"] .form-check-input:checked {
    background-color: var(--accent-color) !important;
    border-color: var(--accent-color) !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='%230b1219'/%3e%3c/svg%3e");
}

/* Listas en Modales */
.theme-option-list {
    background-color: var(--bg-form) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 6px;
    padding: 5px;
    max-height: 150px;
    overflow-y: auto;
}

.theme-option-list table,
.theme-option-list tbody,
.theme-option-list tr,
.theme-option-list td {
    background-color: transparent !important;
    color: var(--text-main) !important;
    border: none !important;
    --bs-table-bg: transparent !important;
    --bs-table-color: var(--text-main) !important;
    --bs-table-hover-bg: transparent !important;
}

/* --- NUEVO: CORRECCIÓN BOTONES Y LISTAS EN MODO OSCURO (Mensajes, Sidebar, etc) --- */

/* 1. Items de lista (Recibidos, Enviados, etc) */
[data-theme="dark"] .list-group-item {
    background-color: var(--bg-card) !important; /* Fondo oscuro (del color de la tarjeta) */
    color: var(--text-main) !important;          /* Texto claro */
    border-color: var(--border-color) !important;
}

/* 2. Hover en items de lista */
[data-theme="dark"] .list-group-item:hover {
    background-color: var(--hover-bg) !important;
    color: var(--text-main) !important;
}

/* 3. Item Activo (El seleccionado, ej: Recibidos azul) */
[data-theme="dark"] .list-group-item.active {
    background-color: var(--accent-color) !important;
    border-color: var(--accent-color) !important;
    color: #ffffff !important; /* Texto blanco para contraste con azul */
}

/* 4. Botones Primarios (Redactar, Guardar, etc) */
[data-theme="dark"] .btn-primary {
    background-color: var(--accent-color) !important;
    border-color: var(--accent-color) !important;
    color: #ffffff !important;
}

[data-theme="dark"] .btn-primary:hover {
    filter: brightness(1.1); /* Un poco más brillante al pasar el mouse */
}

/* 5. Botones Outline (Cancelar, Volver) */
[data-theme="dark"] .btn-outline-secondary {
    color: var(--text-muted) !important;
    border-color: var(--border-color) !important;
}

[data-theme="dark"] .btn-outline-secondary:hover {
    background-color: var(--border-color) !important;
    color: var(--text-main) !important;
}

/*Estilo "Botón" para Acordeones en Formularios (Modo Oscuro)*/

[data-theme="dark"] .accordion-button {
    border: 1px solid var(--border-color) !important; /* Borde SIEMPRE visible */
    border-radius: 6px !important;
    color: var(--text-main) !important;
    box-shadow: none !important;
    padding: 0.75rem 1rem;
    margin-bottom: 0.5rem; /* Separación visual entre acordeones */
}

/* 2. Estilo cuando está ABIERTO */
[data-theme="dark"] .accordion-button:not(.collapsed) {
    background-color: var(--bg-form) !important; /* Fondo más sólido al abrir */
}

/* 3. Estilo cuando está CERRADO */
[data-theme="dark"] .accordion-button.collapsed {
    background-color: rgba(255, 255, 255, 0.03) !important; /* Fondo transparente/sutil */
    /* El borde se hereda del bloque 1, así que ahora SÍ se verá */
}

/* 4. Corregir flecha (blanca) */
[data-theme="dark"] .accordion-button::after {
    filter: invert(1) grayscale(100%) brightness(200%);
}

/* 5. FIX EXTRA: Eliminar bordes dobles del contenedor padre si existen */
/* Esto asegura que el borde sea solo del botón y no del contenedor del acordeón */
[data-theme="dark"] .accordion-item {
    border: none !important;
    background-color: transparent !important;
}

/* Estilo "Botón" para Acordeones en Formularios (Modo CLARO)*/

/* 1. Estilo General */
[data-theme="light"] .accordion-button {
    border: 1px solid var(--border-color) !important; /* Borde gris suave */
    border-radius: 6px !important;
    color: var(--text-main) !important;
    box-shadow: none !important;
    padding: 0.75rem 1rem;
    margin-bottom: 0.5rem;
}

/* 2. Estilo cuando está ABIERTO */
[data-theme="light"] .accordion-button:not(.collapsed) {
    background-color: #e8f0fe !important; /* Azul muy pálido para resaltar */
    color: var(--accent-color) !important; /* Texto azul */
    border-color: var(--accent-color) !important; /* Borde azul */
}

/* 3. Estilo cuando está CERRADO */
[data-theme="light"] .accordion-button.collapsed {
    background-color: #f8f9fa !important; /* Gris muy suave (casi blanco) */
    color: var(--text-main) !important;
}

/* 4. Fix contenedor padre */
[data-theme="light"] .accordion-item {
    border: none !important;
    background-color: transparent !important;
}